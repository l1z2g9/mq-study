#https://w3partnership.com/Blog/2016/04/29/creating-an-ibm-mq-ha-cluster-using-a-multi-instance-queue-manager/

# \\wsl.localhost === \\wsl$

# optional create following path in volume path : \\wsl.localhost\docker-desktop-data\version-pack-data\community\docker\volumes\docker_mqHAdata\_data

# In host machine
mkdir mqHAdata\logs
mkdir mqHAdata\qmgrs

Or 
cd /mqHAdata/
rmdir /q /s logs
rmdir /q /s qmgrs

mkdir logs
mkdir qmgrs

# In node 1
endmqm -i earth && dltmqm earth

crtmqm -lc -lp 3 -ls 2 -lf 4096 -md /mqHAdata/qmgrs -ld /mqHAdata/logs -oa UserExternal QM1

dspmqinf -o command QM1

copy /etc/mqm/qm-service-component.ini to mqHAdata\qmgrs\QM1\qm.ini

strmqm -x QM1

# In node 2
endmqm -i moon && dltmqm moon

addmqinf -s QueueManager -v Name=QM1 -v Directory=QM1 -v Prefix=/mnt/mqm/data -v DataPath=/mqHAdata/qmgrs/QM1

strmqm -x QM1

dspmq -xf -m QM1

# In node 1, switch over to standby QM after shutdown
runmqsc QM1 -f /mqHAdata/hasamples.txt

endmqm -i -s QM1

# Open 3 test containers
/opt/mqm/samp/bin/amqsghac DEV.QUEUE.1 QM1 <<< "passw0rd"
/opt/mqm/samp/bin/amqsmhac -s SOURCE -t TARGET -m QM1 <<< "passw0rd"
/opt/mqm/samp/bin/amqsphac DEV.QUEUE.1 QM1 <<< "passw0rd"
